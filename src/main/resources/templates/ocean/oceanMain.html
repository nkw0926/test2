<!DOCTYPE html>
<html lang="en">
<head th:replace="~{/include/header :: header}">
</head>
<body>
<div id="body-wrapper" style="height: 100vh">
    <div id="body-content" style="height: auto; min-height: 100%; padding-bottom: 90px">
<div th:replace="~{/include/body-header :: bodyHeader}"></div>
<div id="pad">
<main id="main">
    <section class="section site-portfolio" >
        <div class="container" >
            <div class="row mb-5 align-items-center">
                <div class="col-md-12 col-lg-6 mb-4 mb-lg-0" data-aos="fade-up">
                    <h2 th:text="'Hi '+ ${loginUserName}"></h2>
                    <p class="mb-0" style="padding-bottom: 20px">ë‹¹ì‹ ì˜ ë¬¼ê³ ê¸°ë¥¼ ë‚šì•„ë³´ì„¸ìš”! ğŸ  </p>
                </div>
                <!--                <form id="selectConditionMapForm" action="#" method="post">-->
                <div class="container">
                    <div class="row">
                        <div class="col">
                            <select class="form-select btn btn-outline-primary" id="location"
                                    data-style="btn-primary" multiple
                                    title='ì§€ì—­'>
                                <option value="ì„œìš¸">ì„œìš¸</option>
                                <option value="ê²½ê¸°">ê²½ê¸°</option>
                                <option value="ê°•ì›">ê°•ì›</option>
                                <option value="ì¶©ë¶">ì¶©ë¶</option>
                                <option value="ì¶©ë‚¨">ì¶©ë‚¨</option>
                                <option value="ì „ë¶">ì „ë¶</option>
                                <option value="ì „ë‚¨">ì „ë‚¨</option>
                                <option value="ê²½ë¶">ê²½ë¶</option>
                                <option value="ê²½ë‚¨">ê²½ë‚¨</option>
                                <option value="ì œì£¼">ì œì£¼</option>
                            </select>

                        </div>

                        <div class="col">
                            <select class="form-select btn btn-outline-success" data-style="btn-success" multiple
                                    id="age" title='ë‚˜ì´'>
                                <option value="20,21,22,23,24">20~24 age</option>
                                <option value="25,26,27,28,29">25~29 age</option>
                                <option value="30,31,32,33,34">30~34 age</option>
                                <option value="35,36,37,38,39">35~39 age</option>
                            </select>
                        </div>
                        <div class="col">
                            <select class="form-select btn btn-outline-danger" data-style="btn-danger" multiple
                                    id="hobby" title='ì·¨ë¯¸'>
                                <option value="ìš´ë™">ìš´ë™</option>
                                <option value="ë…ì„œ">ë…ì„œ</option>
                                <option value="ì‚°ì±…">ì‚°ì±…</option>
                                <option value="ìŒì•…ê°ìƒ">ìŒì•…ê°ìƒ</option>
                                <option value="ì˜í™”/ë“œë¼ë§ˆê°ìƒ">ì˜í™”/ë“œë¼ë§ˆê°ìƒ</option>
                                <option value="ë…¸ë˜ë¶€ë¥´ê¸°">ë…¸ë˜ë¶€ë¥´ê¸°</option>
                                <option value="ì¶¤ì¶”ê¸°">ì¶¤ì¶”ê¸°</option>
                                <option value="ê³µì˜ˆ/ë§Œë“¤ê¸°">ê³µì˜ˆ/ë§Œë“¤ê¸°</option>
                                <option value="ë§›ì§‘íƒë°©">ë§›ì§‘íƒë°©</option>
                            </select>
                        </div>
                        <div class="col">
                            <select class="form-select btn btn-outline-dark"
                                    style="color: #fd7e14; border-color: #fd7e14" data-style="btn-dark" multiple
                                    id="personality" title='ì„±ê²©'>
                                <option value="ë‹¤ì •ë‹¤ê°">ë‹¤ì •ë‹¤ê°</option>
                                <option value="ì°¸ì„ì„±ë§Œë•…">ì°¸ì„ì„±ë§Œë•…</option>
                                <option value="ì• êµìŸì´">ì• êµìŸì´</option>
                                <option value="ì˜ˆì˜ë°”ë¥¸">ì˜ˆì˜ë°”ë¥¸</option>
                                <option value="ì†Œì‹¬ì†Œì‹¬">ì†Œì‹¬ì†Œì‹¬</option>
                                <option value="ì´ëŒì–´ê°€ëŠ”">ì´ëŒì–´ê°€ëŠ”</option>
                                <option value="ê°ì„±í­ë°œ">ê°ì„±í­ë°œ</option>
                                <option value="ë˜‘ë˜‘ì´">ë˜‘ë˜‘ì´</option>
                                <option value="ì…ë‹µì²œì¬">ì…ë‹µì²œì¬</option>
                                <option value="ê¸ì •ì—ë„ˆì§€">ê¸ì •ì—ë„ˆì§€</option>
                                <option value="ì¸ì‹¸ê·¸ì¡ì±„">ì¸ì‹¸ê·¸ì¡ì±„</option>
                            </select>
                        </div>
                        <div class="col">
                            <button id="submitButton" class="btn btn-warning " onclick="getCheckboxValue()">ì¡°íšŒ</button>
                        </div>
                    </div>
                </div>
                <!--                </form>-->

            </div>
            <div id="zeroContainer">
            </div>
            <div id="portfolio-grid" class="row no-gutter userList" data-aos="fade-up" data-aos-delay="200" style="height: 100vh !important;">

                <div class="item web col-sm-6 col-md-4 col-lg-4 mb-4" th:each="list : ${userList}">
                    <a th:href="@{/ocean/userDetail(userId=${list.userId})}" class="item-wrap fancybox">
                        <div class="work-info">
                            <h3 th:text="${list.userName}"></h3>
                            <h3 th:text="${list.userJob}"></h3>
                            <h3 th:text="${list.userAge} + ' age'"></h3>
                            <h3 th:text="${list.userSex}"></h3>
                            <h3 th:text="${list.userAddress}"></h3>
                        </div>

                        <img class="img-fluid"
                             th:src="@{assets/img/userImg/} + ${list.userEmail} + @{/} + ${list.userEmail} +@{_1.jpg}" style="width: 400px; height: 400px; box-shadow: 5px 5px 5px 5px rgba(199, 199, 199, 0.88); border-radius: 15px;">
                        <!--                        <img class="img-fluid" th:src="@{assets/img/userImg/1/1_1.jpg}" >-->
                    </a>
                </div>
            </div>
        </div>
    </section>

</main>
</div>

    </div>

</div>
<!--<script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>-->
<!--<script src="https://code.jquery.com/jquery-3.4.1.js"></script>-->
<script src="assets/vendor/aos/aos.js"></script>

<script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
<script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
<script src="assets/vendor/php-email-form/validate.js"></script>
<script src="assets/js/main.js"></script>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<!-- ë¶€íŠ¸ìŠ¤íŠ¸ë© JavaScript ë° ì¢…ì†ì„± -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<!-- ë¶€íŠ¸ìŠ¤íŠ¸ë© JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        crossorigin="anonymous"></script>
<!-- Latest compiled and minified JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta3/dist/js/bootstrap-select.min.js"></script>

<!-- (Optional) Latest compiled and minified JavaScript translation files -->
<!--<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta3/dist/js/i18n/defaults-*.min.js"></script>-->
<script th:inline="javascript">
    $('select').selectpicker();

    function getCheckboxValue() {
        const location = document.getElementById('location');
        const locations = location.selectedOptions;
        const locationList = [];

        for (let i = 0; i < locations.length; i++) {
            locationList.push(locations[i].value);
        }

        const age = document.getElementById('age');
        const ages = age.selectedOptions;
        const ageList = [];

        for (let i = 0; i < ages.length; i++) {
            ageList.push(ages[i].value);
        }

        const hobby = document.getElementById('hobby');
        const hobbies = hobby.selectedOptions;
        const hobbyList = [];

        for (let i = 0; i < hobbies.length; i++) {
            hobbyList.push(hobbies[i].value);
        }

        const personality = document.getElementById('personality');
        const personalities = personality.selectedOptions;
        const personalityList = [];

        for (let i = 0; i < personalities.length; i++) {
            personalityList.push(personalities[i].value);
        }


        const selectCondotionMap = {
            locationList: locationList,
            ageList: ageList,
            hobbyList: hobbyList,
            personalityList: personalityList
        };
        $.ajax({
            type: "POST",
            url: "/ocean/selectCondition",
            data: JSON.stringify(selectCondotionMap),
            contentType: "application/json",
            success: function (response) {
                processResponseData(response);
            },
            error: function (error) {
                alert("error");
            },
        });
    }

    function processResponseData(response) {
        console.log("response");
        console.log(response.length);

        // ê²°ê³¼ë¥¼ ë³´ì—¬ì¤„ ì»¨í…Œì´ë„ˆ ìš”ì†Œ ì„ íƒ
        const userListContainer = document.getElementById("portfolio-grid");

        // userListContainerì˜ ë‚´ìš© ì´ˆê¸°í™”
        userListContainer.innerHTML = "";
        // userListë¥¼ ìˆœíšŒí•˜ë©° í‘œì‹œí•  ë¶€ë¶„ì„ ì¶”ê°€
        response.forEach(list => {
            const userItem = `
            <div class="item web col-sm-6 col-md-4 col-lg-4 mb-4">
                <a href="/ocean/userDetail?userId=${list.userId}" class="item-wrap fancybox">
                    <div class="work-info">
                        <h3>${list.userName}</h3>
                        <h3>${list.userJob}</h3>
                        <h3>${list.userAge}</h3>
                        <h3>${list.userSex}</h3>
                        <h3>${list.userAddress}</h3>

                    </div>
                    <img class="img-fluid" src="assets/img/userImg/${list.userEmail}/${list.userEmail}_1.jpg" style="width: 400px; height: 400px">
                </a>
            </div>`;
            // userListContainerì— ì‚¬ìš©ì ì •ë³´ ì¶”ê°€
            userListContainer.innerHTML += userItem;
        });

        var responseLen = response.length;
        const zeroContainer = document.getElementById("zeroContainer");
        zeroContainer.innerHTML = "";

        if (responseLen == 0) {
            dynamicHTML = `
         <div  class="alert alert-danger mb-4" role="alert">
         <h3>
         ì¡°ê±´ì— ë§ëŠ” ì‚¬ìš©ìê°€ ì—†ìŠµë‹ˆë‹¤.
         ë‹¤ë¥¸ ì¡°ê±´ìœ¼ë¡œ ê²€ìƒ‰í•´ ì£¼ì„¸ìš”
         </h3>
         </div>
         `;
        } else {
            dynamicHTML = `

         `;
        }


        zeroContainer.innerHTML += dynamicHTML;
    }
</script>

</body>

</html>
